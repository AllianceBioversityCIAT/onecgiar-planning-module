<!-- user-management-content -->

<div class="user-management__icon-box">
  <mat-icon class="user-management__icon-box__icon">
    <svg
      class="cc"
      xmlns="http://www.w3.org/2000/svg"
      width="40"
      height="30"
      viewBox="0 0 24 24"
    >
      <path
        fill="currentColor"
        d="M19 11q-.95 0-2.025-.537t-2-1.488q-.925-.95-1.462-2.025t-.538-2q0-.425.125-.775t.375-.6q.65-.65 2.638-1.138t3.737-.412q.625.05 1.038.15t.612.3q.175.175.288.537t.162.913q.125 1.725-.35 3.8t-1.15 2.75q-.25.25-.637.388T19 11Zm.875-5q.05-.45.075-.95T20 4q-.5-.025-1.012.013t-1.013.087q.275.2.537.425t.488.45q.25.25.463.5t.412.525ZM19 9q.025-.5-.375-1.238T17.575 6.4q-.625-.625-1.338-1.012T15.026 5q.05.575.425 1.3t.925 1.275q.6.6 1.313.988T19 9Zm2.3 9.7L16.6 14h-10L1.3 8.7l1.4-1.4L7.4 12h10l5.3 5.3l-1.4 1.4ZM8 22v-4q0-.825.588-1.413T10 16h4q.825 0 1.413.588T16 18v4H8Z"
        fill="black"
      />
    </svg>
  </mat-icon>
  <span class="user-management__icon-box__title">Phases</span>
</div>

<div class="user-management__text-box--1">
  <p class="user-management__text-box__title">
    Welcome to the phases panel, here you can manage the phases table within the
    platform.
  </p>
</div>

<div class="user-management__content--1">
  <div class="user-management__container">
    <div class="form-container">
      <form class="search" [formGroup]="filterForm">
        <div class="sec-1">
          <div class="risk-management-form-field field-3">
            <mat-label class="risk-management-form-field__label"
              >Search
            </mat-label>
            <input
              formControlName="name"
              class="search__input"
              matInput
              placeholder="Search"
              #input
            />

            <button
              style="border: none; cursor: pointer; background-color: #ffffff12"
              class="search__button"
            >
              <mat-icon class="search__icon">
                <img
                  class="search__icon"
                  src="../../assets/shared-image/Vector-search.svg"
                  alt="~/Frontend/images/icon _ search-icon"
              /></mat-icon>
            </button>
          </div>
        </div>

        <!-- //My role----- -->
        <!-- <div class="sec-5">
          <div class="risk-management-form-field field-3">
            <mat-label class="risk-management-form-field__label"
              >Role</mat-label
            >

            <mat-select
              formControlName="role"
              class="risk-management-form-field-box__input-3"
              [placeholder]="'All'"
              id="select-where"
            >
              <mat-option>All</mat-option>
              <mat-option value="user">User</mat-option>
              <mat-option value="admin">Admin</mat-option>
            </mat-select>
          </div>
        </div> -->
        <!-- //Sort----- -->
        <!-- <div class="sec-6">
          <div class="risk-management-form-field field-3">
            <mat-label class="risk-management-form-field__label"
              >Sort</mat-label
            >

            <mat-select
              formControlName="sort"
              class="risk-management-form-field-box__input-3"
              [placeholder]="'All'"
              id="select-where"
            >
              <mat-option>All</mat-option>
              <mat-option *ngFor="let item of sort" [value]="item.value">
                {{ item.name }}
              </mat-option>
            </mat-select>
          </div>
        </div> -->
        <!-- //Reset Button----- -->
        <!-- <div class="sec-9">
          <button
            class="risk-management-reset-btn"
            mat-raised-button
            (click)="resetForm()"
          >
            Reset
          </button>
        </div> -->

        <div class="sec-7">
          <!-- <button
            class="user-management__button-box__btn btn-primary-size"
            (click)="openDialogAddUser('Add User', null)"
            mat-raised-button
          >
            Add new user
          </button>

          <button
            class="user-management__button-box__btn btn-export-size"
            mat-raised-button
            (click)="export()"
          >
            <mat-icon class="risk-management-export-box-icon">
              <svg
                class="risk-management-export-box-icon"
                xmlns="http://www.w3.org/2000/svg"
                width="22"
                height="21"
                viewBox="0 0 22 21"
                fill="none"
              >
                <path
                  d="M5.65951 17.6484C5.15534 17.6484 4.72389 17.4772 4.36517 17.1348C4.00584 16.7918 3.82617 16.3797 3.82617 15.8984V13.2734H5.65951V15.8984H16.6595V13.2734H18.4928V15.8984C18.4928 16.3797 18.3135 16.7918 17.9548 17.1348C17.5954 17.4772 17.1637 17.6484 16.6595 17.6484H5.65951ZM11.1595 14.1484L6.57617 9.77344L7.8595 8.50469L10.2428 10.7797V3.64844H12.0762V10.7797L14.4595 8.50469L15.7428 9.77344L11.1595 14.1484Z"
                  fill="white"
                />
              </svg>
            </mat-icon>
            <span class="user-management__button-box__title">Export data</span>
          </button> -->

          <button
            class="user-management__button-box__btn btn-primary-size"
            mat-raised-button
            color="primary"
            (click)="openDialog()"
          >
            Add new
          </button>
        </div>
      </form>
    </div>

    <div class="table-box mat-elevation-z8">
      <table mat-table matSort [dataSource]="dataSource">
        <tr
          class="table-header"
          mat-header-row
          *matHeaderRowDef="columnsToDisplay"
        ></tr>
        <tr
          class="table-header"
          mat-row
          *matRowDef="let myRowData; columns: columnsToDisplay"
        ></tr>

        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="12">
            No results matching({{ filters?.name }})
          </td>
        </tr>

        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef>Id</th>
          <td mat-cell *matCellDef="let phase">{{ phase.id }}</td>
        </ng-container>

        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td mat-cell *matCellDef="let phase">{{ phase.name }}</td>
        </ng-container>

        <ng-container matColumnDef="reporting_year">
          <th mat-header-cell *matHeaderCellDef>Reporting year</th>
          <td mat-cell *matCellDef="let phase">{{ phase.reportingYear }}</td>
        </ng-container>

        <ng-container matColumnDef="toc_phase">
          <th mat-header-cell *matHeaderCellDef>ToC phase</th>
          <td mat-cell *matCellDef="let phase">{{ phase.tocPhase }}</td>
        </ng-container>

        <ng-container matColumnDef="start_date">
          <th mat-header-cell *matHeaderCellDef>Start date</th>
          <td mat-cell *matCellDef="let phase">
            {{ phase.startDate | date : "mediumDate" }}
          </td>
        </ng-container>

        <ng-container matColumnDef="end_date">
          <th mat-header-cell *matHeaderCellDef>End date</th>
          <td mat-cell *matCellDef="let phase">
            {{ phase.endDate | date : "mediumDate" }}
          </td>
        </ng-container>

        <ng-container matColumnDef="previous_phase">
          <th mat-header-cell *matHeaderCellDef>Previous Phase</th>
          <td mat-cell *matCellDef="let phase">
            {{ phase.previousPhase ? phase.previousPhase.name : "" }}
          </td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>Status</th>
          <td mat-cell *matCellDef="let phase">
            <span
              [ngClass]="{
                closed: phase.status === 'closed',
                open: phase.status === 'open'
              }"
              >{{ phase.status }}</span
            >
          </td>
        </ng-container>

        <ng-container matColumnDef="active">
          <th mat-header-cell *matHeaderCellDef>Active</th>
          <td mat-cell *matCellDef="let phase">
            {{ phase.active ? "Yes" : "No" }}
          </td>
        </ng-container>

        <ng-container matColumnDef="show_eoi">
          <th mat-header-cell *matHeaderCellDef>Show EOI</th>
          <td mat-cell *matCellDef="let phase">
            {{ phase.show_eoi ? "Yes" : "No" }}
          </td>
        </ng-container>

        <ng-container matColumnDef="show_melia">
          <th mat-header-cell *matHeaderCellDef>Show MELIA</th>
          <td mat-cell *matCellDef="let phase">
            {{ phase.show_melia ? "Yes" : "No" }}
          </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef class="actions_column">
            Actions
          </th>
          <td mat-cell *matCellDef="let phase">
            <div class="m">
              <button
                class="user-management-table-icon"
                matTooltip="Edit Phase"
                (click)="openDialog(phase.id)"
              >
                <mat-icon class="user-management-table__icon">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="22"
                    height="21"
                    viewBox="0 0 22 21"
                    fill="none"
                  >
                    <path
                      d="M17.6917 7.80937L13.7958 4.13437L15.0792 2.90938C15.4306 2.57396 15.8623 2.40625 16.3744 2.40625C16.8859 2.40625 17.3174 2.57396 17.6687 2.90938L18.9521 4.13437C19.3035 4.46979 19.4868 4.87462 19.5021 5.34887C19.5174 5.82254 19.3493 6.22708 18.9979 6.5625L17.6917 7.80937ZM16.3625 9.1L6.64583 18.375H2.75V14.6562L12.4667 5.38125L16.3625 9.1Z"
                      fill="#04030F"
                    /></svg
                ></mat-icon>
              </button>
              <button
                *ngIf="!phase.active"
                class="user-management-table-icon"
                matTooltip="Activate Phase"
                (click)="activate(phase.id)"
              >
                <mat-icon class="user-management-table__icon"
                  >check_circle_outline</mat-icon
                >
              </button>
              <button
                *ngIf="phase.active"
                class="user-management-table-icon"
                matTooltip="Deactivate Phase"
                (click)="deactivate(phase.id)"
              >
                <mat-icon class="user-management-table__icon">block</mat-icon>
              </button>
              <button
                *ngIf="showManageInit"
                routerLink="{{ phase.id }}/initiatives"
                class="user-management-table-icon"
                matTooltip="Manage Initiatives"
              >
                <mat-icon class="user-management-table__icon">dns</mat-icon>
              </button>
              <button
                class="user-management-table-icon"
                matTooltip="Delete Phase"
                (click)="delete(phase.id)"
              >
                <mat-icon class="user-management-table__icon">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="21"
                    height="21"
                    viewBox="0 0 21 21"
                    fill="none"
                  >
                    <path
                      d="M17.7188 3.9375H14.7656V2.95312C14.7635 2.34462 14.5208 1.76166 14.0905 1.33138C13.6602 0.901097 13.0773 0.658412 12.4688 0.65625H8.53125C7.92275 0.658412 7.33978 0.901097 6.9095 1.33138C6.47922 1.76166 6.23654 2.34462 6.23438 2.95312V3.9375H3.28125C3.02018 3.9375 2.7698 4.04121 2.58519 4.22582C2.40059 4.41042 2.29688 4.6608 2.29688 4.92188C2.29688 5.18295 2.40059 5.43333 2.58519 5.61793C2.7698 5.80254 3.02018 5.90625 3.28125 5.90625H3.60938V17.0625C3.61153 17.497 3.78507 17.913 4.09229 18.2202C4.3995 18.5274 4.81554 18.701 5.25 18.7031H15.75C16.1845 18.701 16.6005 18.5274 16.9077 18.2202C17.2149 17.913 17.3885 17.497 17.3906 17.0625V5.90625H17.7188C17.9798 5.90625 18.2302 5.80254 18.4148 5.61793C18.5994 5.43333 18.7031 5.18295 18.7031 4.92188C18.7031 4.6608 18.5994 4.41042 18.4148 4.22582C18.2302 4.04121 17.9798 3.9375 17.7188 3.9375ZM8.20312 2.95312C8.20312 2.8661 8.2377 2.78264 8.29923 2.72111C8.36077 2.65957 8.44423 2.625 8.53125 2.625H12.4688C12.5558 2.625 12.6392 2.65957 12.7008 2.72111C12.7623 2.78264 12.7969 2.8661 12.7969 2.95312V3.9375H8.20312V2.95312ZM15.4219 16.7344H5.57812V5.90625H15.4219V16.7344ZM9.51562 8.53125V13.7812C9.51562 14.0423 9.41191 14.2927 9.22731 14.4773C9.0427 14.6619 8.79232 14.7656 8.53125 14.7656C8.27018 14.7656 8.0198 14.6619 7.83519 14.4773C7.65059 14.2927 7.54688 14.0423 7.54688 13.7812V8.53125C7.54688 8.27018 7.65059 8.0198 7.83519 7.83519C8.0198 7.65059 8.27018 7.54688 8.53125 7.54688C8.79232 7.54688 9.0427 7.65059 9.22731 7.83519C9.41191 8.0198 9.51562 8.27018 9.51562 8.53125ZM13.4531 8.53125V13.7812C13.4531 14.0423 13.3494 14.2927 13.1648 14.4773C12.9802 14.6619 12.7298 14.7656 12.4688 14.7656C12.2077 14.7656 11.9573 14.6619 11.7727 14.4773C11.5881 14.2927 11.4844 14.0423 11.4844 13.7812V8.53125C11.4844 8.27018 11.5881 8.0198 11.7727 7.83519C11.9573 7.65059 12.2077 7.54688 12.4688 7.54688C12.7298 7.54688 12.9802 7.65059 13.1648 7.83519C13.3494 8.0198 13.4531 8.27018 13.4531 8.53125Z"
                      fill="#04030F"
                    /></svg
                ></mat-icon>
              </button>
            </div>
          </td>
        </ng-container>
      </table>
      <div class="glossary-content-container user-management-paginator-box">
        <mat-paginator
          [pageSizeOptions]="[10, 20, 30, 50, 100]"
          aria-label="Select page"
        >
        </mat-paginator>
      </div>
    </div>
  </div>
</div>
