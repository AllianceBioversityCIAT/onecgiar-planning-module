<div class="globalContainer">
  <div class="head">
    <h2 class="primaryColor">Team Members</h2>
    <div class="buttons">
      <button
        mat-raised-button
        color="primary"
        (click)="openNewTeamMemberDialog()"
      >
        New Team Member
        <mat-icon>add</mat-icon>
      </button>
    </div>
  </div>
  <div class="tableContainer">
    <div class="table">
      <table mat-table [dataSource]="dataSource">
        <ng-container matColumnDef="User Name">
          <th
            class="big bold center spacing border-left-0"
            mat-header-cell
            *matHeaderCellDef
          >
            User Name
          </th>
          <td
            class="border-left-0 center"
            mat-cell
            *matCellDef="let element"
            style="min-width: 170px"
          >
            {{ element["User Name"] }}
          </td>
        </ng-container>

        <ng-container matColumnDef="Email">
          <th class="big bold center spacing" mat-header-cell *matHeaderCellDef>
            Email
          </th>
          <td
            class="center"
            mat-cell
            *matCellDef="let element"
            style="min-width: 190px"
          >
            {{ element?.user?.email || element.email }}
          </td>
        </ng-container>
        <ng-container matColumnDef="User">
          <th class="big bold center spacing" mat-header-cell *matHeaderCellDef>
            User name
          </th>
          <td
            class="center"
            mat-cell
            *matCellDef="let element"
            style="min-width: 190px"
          >
            {{ element?.user?.full_name }}
          </td>
        </ng-container>
        <ng-container matColumnDef="Creation Date">
          <th class="big bold center spacing" mat-header-cell *matHeaderCellDef>
            Creation Date
          </th>
          <td
            class="center"
            mat-cell
            *matCellDef="let element"
            style="min-width: 150px"
          >
            {{ element.createdAt | date : "MMMM d, y" }}
          </td>
        </ng-container>

        <ng-container matColumnDef="Role">
          <th class="big bold center spacing" mat-header-cell *matHeaderCellDef>
            Role
          </th>
          <td
            class="center"
            mat-cell
            *matCellDef="let element"
            style="min-width: 110px"
          >
            {{ element.role }}
          </td>
        </ng-container>
        <ng-container matColumnDef="organizations">
          <th class="big bold center spacing" mat-header-cell *matHeaderCellDef>
            Organizations
          </th>
          <td
            class="center"
            mat-cell
            *matCellDef="let element"
            style="min-width: 110px"
          >
            {{ join(element.organizations) }}
          </td>
        </ng-container>

        <ng-container matColumnDef="Status">
          <th class="big bold center spacing" mat-header-cell *matHeaderCellDef>
            Status
          </th>
          <td
            class="center"
            mat-cell
            *matCellDef="let element"
            style="min-width: 110px"
          >
            {{ element.user_id ? "Active" : "Invited" }}
          </td>
        </ng-container>

        <ng-container matColumnDef="Actions" stickyEnd>
          <th class="big bold center spacing" mat-header-cell *matHeaderCellDef>
            Actions
          </th>
          <td
            class="center"
            mat-cell
            *matCellDef="let element"
            style="min-width: 150px"
          >
            <button
              matTooltip="Update"
              matTooltipPosition="above"
              (click)="openEditTeamMemberDialog(element.id, element)"
              mat-icon-button
            >
              <mat-icon>edit</mat-icon>
            </button>
            <button
              matTooltip="Delete"
              matTooltipPosition="above"
              (click)="deleteMember(element.id)"
              mat-icon-button
            >
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </div>
  </div>

  <mat-paginator
    [pageSizeOptions]="[5, 10, 20]"
    showFirstLastButtons
    aria-label="Select page of periodic elements"
  >
  </mat-paginator>
</div>
